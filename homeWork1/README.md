------------------------------------------------------------
Описание файлов в директории

errorsResolve.txt - ошибки с которыми встретился и их решение

logFileFull.log - полный лог выполнения

used_commands.txt - команды которые использовал


Vagrantfile - вагрант файл

------------------------------------------------------------
Описание как запустить виртуальную машину (кратко)

Выполнить команду

vagrant up

vagrant ssh

 lsblk
 
NAME                       MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT

sda                          8:0    0   10G  0 disk

sdb                          8:16   0    2G  0 disk

├─vg_var-lv_var_rmeta_0    253:3    0    4M  0 lvm

│ └─vg_var-lv_var          253:7    0  952M  0 lvm  /var

└─vg_var-lv_var_rimage_0   253:4    0  952M  0 lvm

  └─vg_var-lv_var          253:7    0  952M  0 lvm  /var
  
sdc                          8:32   0    1G  0 disk

├─vg_var-lv_var_rmeta_1    253:5    0    4M  0 lvm

│ └─vg_var-lv_var          253:7    0  952M  0 lvm  /var

└─vg_var-lv_var_rimage_1   253:6    0  952M  0 lvm

  └─vg_var-lv_var          253:7    0  952M  0 lvm  /var
  
sdd                          8:48   0    1G  0 disk

sde                          8:64   0   40G  0 disk

├─sde1                       8:65   0    1M  0 part

├─sde2                       8:66   0    1G  0 part /boot

└─sde3                       8:67   0   39G  0 part

  ├─VolGroup00-LogVol00    253:0    0    8G  0 lvm  /
  
  ├─VolGroup00-LogVol01    253:1    0  1.5G  0 lvm  [SWAP]
  
  └─VolGroup00-LogVol_Home 253:2    0    2G  0 lvm  /home
  


------------Vagrantfile (только интересные моменты)------------

#Указал свой vagrant Cloud с подготовленным box файлом

:box_name => "alenchik/centos-7",


------------------------------------------------------------

Интересные моменты по коммандам

xfsdump：Резервное копирование файловых систем XFS

xfsrestore：Восстановление файловой системы XFS

xfsdump -J - /dev/VolGroup00/LogVol00 | xfsrestore -J - /mnt

Чтобы скопировать все содержимое одной файловой системы XFS в другую через |(конвеер), нужно использовать опцию -J, чтобы подавить инвентаризацию дампа.


mount --bind $i /mnt/$i

Опция bind позволяет перемонтировать точку монтирования к другой директории.

$i - старая точка монтирования

/mnt/$i - новая точка монтирования


cd /boot ; for i in `ls initramfs-*img`; do dracut -v $i `echo $i|sed "s/initramfs-//g; s/.img//g"` --force; done

dracut - утилита создания initramfs (initial RAM disk image, загружаемый в оперативную память файл с образом файловой системы), используемого при загрузке Linux в качестве первоначальной корневой файловой системы. Заменяет mkinitrd (с Fedora 12 и RHEL 6). Загрузчик загружает в память ядро и initramfs, монтирует временную корневую файловую систему и передаёт управление ядру. Задача initramfs - обеспечить хранение скриптов, программ, модулей ядра и прочих файлов, необходимых для загрузки драйверов, инициализации сетевых устройств, видео, устройств хранения, обработки сложных случаев в виде программных RAID, LVM, iSCSI, multipath, FibreChannel, LUKS, NFS для бездисковых компьютеров, поиска по имени или метке, обслуживания (fsck) и монтирования "настоящей" корневой файловой системы в режиме только чтения, после чего корневая файловая система "переключается". Подробно процесс загрузки описан в dracut.bootup.7 и bootup.7
